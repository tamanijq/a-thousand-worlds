<!doctype html>
<html lang="en-US">
  <head>
    <%= t.include("partials/_head.html", grunt.data.json) %>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>

    <main class="concierge">
      <form class="filters" autocomplete="off">

        <fieldset class="years">
          <% grunt.data.json.years.forEach(function(y) { %>
          <input type="checkbox" id="year-<%= y.year %>" value="<%= y.year %>" <%= y.current ? "checked=checked" : "" %>>
          <label for="year-<%= y.year %>"><%= y.year %></label>
          <% }); %>
        </fieldset>

        <%
          // set up tagging
          var tags = new Set();
          shelf.forEach(function(item) {
            item.tags.split(/\|\s/).forEach(t => tags.add(t.trim()));
          });
        %>

        <fieldset class="tags">
          <% Array.from(tags).sort().forEach(function(tag) { %>
          <input type="checkbox" id="tag-<%= tag %>" value="<%= tag %>">
          <label for="tag-<%= tag %>"><%= tag %></label>
          <% }); %>
        </fieldset>
      </form>

      <div class="books">
        <div class="view-controls">
          <input type="radio" id="view-covers" name="view-controls" value="covers" checked="checked">
          <label for="view-covers">Covers</label>
          <input type="radio" id="view-list" name="view-controls" value="list">
          <label for="view-list">List</label>
        </div>
        <div class="book-shelf">
          <% for (var i = 0; i < 100; i++) { %>
          <div class="placeholder book-container"></div>
          <% } %>
        </div>
        <div class="book-list"></div>
      </div>
    </main>

    <script src="app.js" async></script>
    <%= t.include("partials/_analytics.html") %>
  </body>
</html>
